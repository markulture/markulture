---
import { getEntry } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import Navigation from '../components/Navigation.astro';
import Footer from '../components/Footer.astro';

const contactPage = await getEntry('pages', 'contact');

if (!contactPage) {
  throw new Error('Contact page not found');
}

const { Content } = await contactPage.render();
---

<Layout title={contactPage.data.title} description="Contact Markulture for digital marketing solutions">
  <Navigation />
  
  <main class="min-h-screen bg-white pt-32 pb-16 relative">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 lg:gap-24">
        
        <!-- Left Column: Content -->
        <div class="relative pt-8">
          <!-- Decorative Arrow -->
          <div class="absolute top-0 right-0 lg:right-20 hidden md:block">
            <svg viewBox="0 0 99 90" class="fill-current transition text-black w-24 h-20">
            <path d="M90.4033 54.3701C89.4399 55.7042 89.2277 57.6126 87.1354 57.6278C86.8082 57.0608 86.3486 56.5815 85.7958 56.2308C85.2431 55.8801 84.6137 55.6684 83.9613 55.6138C83.8823 55.6071 83.8041 55.5933 83.7276 55.5726C82.5446 55.1178 81.3555 54.6127 80.1785 54.2082C79.0593 53.8254 77.9058 53.5223 76.77 53.1884C76.645 53.1514 76.5035 53.1634 76.3836 53.1176C75.1673 52.6494 73.9669 52.1437 72.7347 51.7132C71.5025 51.2827 70.2308 50.9816 69.0478 50.5268C68.0581 50.1427 67.1445 49.586 66.0976 49.0576L66.9258 46.7616C67.1185 46.5393 67.3452 46.319 67.5286 46.062C68.2404 45.0625 69.0928 44.9342 70.2475 45.4078C71.4818 45.9156 72.7931 46.2395 74.0769 46.6413C74.1812 46.6564 74.2845 46.677 74.3866 46.703C75.5985 47.1686 76.804 47.6656 78.0286 48.1093C79.0096 48.4179 79.9733 48.779 80.9157 49.1909L81.7322 48.9424C81.6787 48.812 81.671 48.7139 81.619 48.6722C80.7283 47.9239 79.7745 47.2444 78.9445 46.4316C76.1891 43.7229 72.6288 42.3171 69.3516 40.4718C68.2147 39.8154 66.8288 39.6005 65.5392 39.2188C65.4514 39.1681 65.344 39.1412 65.2435 39.1125C63.9652 38.7315 62.6895 38.3461 61.4061 37.9738C60.5359 37.7172 59.6677 37.4267 58.7814 37.2486C57.6282 37.0159 56.4532 36.8818 55.2954 36.6874C54.965 36.6312 54.6411 36.5028 54.3156 36.4787C53.4956 36.3682 52.6921 36.2495 51.8595 36.161C50.9451 36.072 50.0257 35.9919 49.1036 35.9569C47.4863 35.8894 45.8545 35.8369 44.2382 35.8284C42.9846 35.8304 41.7225 35.8977 40.4679 35.9927C38.5152 36.1412 36.547 36.2456 34.615 36.5406C32.2086 36.9071 29.8132 37.356 27.445 37.9201C25.0768 38.4841 22.8508 39.1362 20.5987 39.8844C18.7631 40.5004 16.964 41.2203 15.2101 42.0407C13.1992 42.9691 11.2356 44.0184 9.29712 45.0647C7.94028 45.803 6.63712 46.6308 5.31639 47.4485C4.40606 48.0115 3.58891 48.6869 2.7105 49.2859C2.40874 49.4654 2.09264 49.6196 1.76542 49.7469L0.720722 49.1437C0.446973 47.6513 1.17779 46.5984 1.90404 45.5838C2.2538 45.1366 2.68563 44.7602 3.17639 44.4748C5.12506 43.2588 7.09586 42.0146 9.08824 40.8648C10.439 40.0762 11.8273 39.3443 13.2648 38.6994C15.4899 37.5748 17.7772 36.5779 20.1156 35.7135C23.9626 34.4229 27.8587 33.2602 31.7959 32.3203C34.3555 31.7087 37.0317 31.5741 39.6572 31.2639C40.9951 31.1058 42.3405 30.9753 43.6797 30.9467C45.2761 30.9086 46.8701 30.9861 48.4642 31.0227C49.7566 31.0549 51.0454 31.0732 52.3325 31.155C53.3099 31.2159 54.2748 31.3692 55.2418 31.4886L56.8076 31.6961C57.6853 31.8283 58.5246 31.9559 59.3658 32.0904C60.207 32.2249 60.9295 32.3318 61.711 32.4786C62.3171 32.5945 62.9233 32.7104 63.5191 32.8846C64.481 33.1649 65.4301 33.508 66.3919 33.7883C67.5321 34.1247 68.6744 34.4271 69.8178 34.7478L70.0432 34.8136C73.5559 36.2123 76.9123 37.9755 80.0573 40.0743C81.1353 40.8021 82.0065 41.8376 82.9726 42.729C83.0987 42.8144 83.2307 42.8906 83.3676 42.9571C83.2424 41.7143 83.0857 40.6172 83.0158 39.5116C82.8758 38.4402 82.848 37.3571 82.9328 36.2798C83.0833 35.5356 83.4444 34.8503 83.9732 34.3054C84.3933 33.8515 85.0977 33.6553 85.7852 33.2856L86.475 34.392C86.5967 41.3683 88.3267 47.8804 90.4033 54.3701Z"></path>
            </svg>
          </div>

          <span class="text-sm font-bold text-black mb-4 block">Get in touch</span>
          
          <h1 class="text-6xl md:text-7xl font-bold text-black leading-tight mb-2">
            Hey there!
          </h1>
          <h1 class="text-6xl md:text-7xl font-bold text-[#5EEAD4] leading-tight mb-12">
            Let's chat
          </h1>

          <div class="space-y-12 max-w-md">
            <div>
              <h3 class="text-xl font-bold text-black mb-3">Interested in working with us?</h3>
              <p class="text-gray-600 leading-relaxed">
                Or have a general enquiry? Fill in the form today, and our team will be in touch shortly.
              </p>
            </div>

            <div>
              <h3 class="text-xl font-bold text-black mb-3">Hate Forms?</h3>
              <p class="text-gray-600 mb-4">
                If you'd prefer to email us directly, send a message to one of our regional offices:
              </p>
              
              <div class="space-y-2">
                <p>
                  <a href="mailto:contact.markulture@gmail.com" class="text-[#5EEAD4] hover:underline font-medium">contact.markulture@gmail.com</a>
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Column: Form -->
        <div class="bg-gray-100 rounded-[2.5rem] p-8 md:p-12">
          <form id="contact-form" class="space-y-6">
            <div class="grid md:grid-cols-2 gap-6">
              <div class="space-y-2">
                <input type="text" name="name" placeholder="Name *" class="w-full px-6 py-4 rounded-full border-none bg-white focus:ring-2 focus:ring-[#5EEAD4] placeholder:text-black" required />
              </div>
              <div class="space-y-2">
                <input type="tel" name="phone" placeholder="Phone *" class="w-full px-6 py-4 rounded-full border-none bg-white focus:ring-2 focus:ring-[#5EEAD4] placeholder:text-black" required />
              </div>
            </div>

            <div class="space-y-2">
              <input type="email" name="email" placeholder="Email Address *" class="w-full px-6 py-4 rounded-full border-none bg-white focus:ring-2 focus:ring-[#5EEAD4] placeholder:text-black" required />
            </div>

            <!-- <div class="space-y-4">
              <label class="text-sm font-medium text-gray-700">Which region are you looking for support in?</label>
              <div class="flex flex-wrap gap-3">
                {['UK', 'United States', 'Europe', 'Global'].map(region => (
                  <label class="cursor-pointer">
                    <input type="radio" name="region" value={region} class="peer sr-only" />
                    <span class="inline-block px-8 py-3 rounded-full bg-white border border-transparent text-sm font-medium text-gray-600 peer-checked:bg-black peer-checked:text-white transition-colors hover:border-gray-300">
                      {region}
                    </span>
                  </label>
                ))}
              </div>
            </div> -->

            <!-- <div class="space-y-2">
              <div class="relative">
                <select name="source" class="w-full px-6 py-4 rounded-full border-none bg-white focus:ring-2 focus:ring-[#5EEAD4] appearance-none cursor-pointer text-black">
                  <option value="" disabled selected>How did you hear about us? *</option>
                  <option value="search">Search Engine</option>
                  <option value="social">Social Media</option>
                  <option value="referral">Referral</option>
                  <option value="other">Other</option>
                </select>
                <div class="absolute right-6 top-1/2 -translate-y-1/2 pointer-events-none">
                  <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                </div>
              </div>
            </div> -->

            <div class="space-y-2">
              <textarea name="message" rows="4" placeholder="Message *" class="w-full px-6 py-4 rounded-3xl border-none bg-white focus:ring-2 focus:ring-[#5EEAD4] resize-none placeholder:text-black"></textarea>
            </div>

            <!-- <div class="flex items-start gap-3 justify-content-center">
              <input type="checkbox" id="newsletter" name="newsletter" class="w-5 h-5 rounded border-gray-300 text-black focus:ring-[#5EEAD4] cursor-pointer accent-black" />
              <label for="newsletter" class="text-sm text-gray-600  cursor-pointer">
                Do you want to be added to our weekly social insights newsletter?
              </label>
            </div> -->

            <p class="text-xs text-gray-500">
              By submitting this for I accept the <a href="/privacy" class="underline hover:text-black">Privacy Policy</a> of this site.
            </p>

            <button type="submit" class="bg-black text-white px-8 py-4 rounded-full font-bold hover:bg-gray-800 transition-colors">
              Send Message
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- Floating Social Icons -->
    <div class="absolute right-0 top-1/2 -translate-y-1/2 hidden xl:flex flex-col gap-2 p-2 bg-white/80 backdrop-blur-sm rounded-l-2xl shadow-lg z-50">
      <a href="#" class="w-10 h-10 bg-black text-white rounded-full flex items-center justify-center hover:bg-[#5EEAD4] hover:text-black transition-colors">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
      </a>
      <a href="#" class="w-10 h-10 bg-black text-white rounded-full flex items-center justify-center hover:bg-[#5EEAD4] hover:text-black transition-colors">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
      </a>
      <a href="#" class="w-10 h-10 bg-black text-white rounded-full flex items-center justify-center hover:bg-[#5EEAD4] hover:text-black transition-colors">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
      </a>
      <a href="#" class="w-10 h-10 bg-black text-white rounded-full flex items-center justify-center hover:bg-[#5EEAD4] hover:text-black transition-colors">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.263-4.356 2.698-4.385 4.802 0 0 .043 2.481.043 2.481s-.043 2.481-.043 2.481c.029 2.104.488 4.538 4.385 4.802 3.6.245 11.631.245 15.23 0 3.897-.263 4.356-2.698 4.385-4.802 0 0-.043-2.481-.043-2.481s.043-2.481.043-2.481c-.029-2.104-.488-4.538-4.385-4.802zm-10.734 9.618v-5.3l5.095 2.65-5.095 2.65z"/></svg>
      </a>
      <a href="#" class="w-10 h-10 bg-black text-white rounded-full flex items-center justify-center hover:bg-[#5EEAD4] hover:text-black transition-colors">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/></svg>
      </a>
      <a href="#" class="w-10 h-10 bg-black text-white rounded-full flex items-center justify-center hover:bg-[#5EEAD4] hover:text-black transition-colors">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm4.441 16.892c-2.102.144-6.784.144-8.883 0C5.282 16.736 5.017 15.622 5 12c.017-3.629.285-4.736 2.558-4.892 2.099-.144 6.782-.144 8.883 0C18.718 7.264 18.982 8.378 19 12c-.018 3.629-.285 4.736-2.559 4.892zM10 9.658l4.917 2.338L10 14.342V9.658z"/></svg>
      </a>
    </div>
  </main>
  
  <Footer />
</Layout>

<script>
  // Handle form submission to Google Apps Script
  const form = document.getElementById('contact-form') as HTMLFormElement;
  const submitBtn = form?.querySelector('button[type="submit"]') as HTMLButtonElement;
  
  form?.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    // Disable button and show loading state
    const originalText = submitBtn.textContent;
    submitBtn.disabled = true;
    submitBtn.textContent = 'Sending...';
    submitBtn.classList.add('opacity-70', 'cursor-not-allowed');
    
    // Get form data
    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());
    
    try {
      // Use no-cors mode to avoid CORS issues with Google Apps Script
      await fetch('https://script.google.com/macros/s/AKfycbwFXWmEkp1yzKSw2OyTR7JoOM15nc2ULsMWlXMZHerEBavpu4yG5BvgeHNBxrd3CozKHw/exec', {
        method: 'POST',
        mode: 'no-cors',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(data)
      });
      
      // With no-cors we can't read response, assume success
      form.reset();
      alert('Thank you for contacting us! We will get back to you soon.');
      
    } catch (error) {
      console.error('Error submitting form:', error);
      alert('Sorry, there was an error sending your message. Please try again or email us directly.');
    } finally {
      // Re-enable button
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
      submitBtn.classList.remove('opacity-70', 'cursor-not-allowed');
    }
  });
</script>


